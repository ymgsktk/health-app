{"ast":null,"code":"import axios from 'axios';\nimport MockAdapter from 'axios-mock-adapter';\nimport { menus } from './apidata';\nconst api = axios.create({\n  baseURL: 'http://localhost:3001/'\n});\nconst mock = new MockAdapter(api);\n\n/*\nmock.onPost('/user1').reply((config) => {\n  const { email, password } = JSON.parse(config.data);\n  if (email === USER_INFO.email && password === USER_INFO.password) {\n    return [200, { token: USER_INFO.token, message:`Login success` }];\n  }else if(email !== USER_INFO.email || password !== USER_INFO.password){\n    return [200, { messageErr: 'Invalid email or password', token: null}];\n  }else{\n    return [400, { messageErr: 'exception' }];\n  }\n  \n});\n\nexport const login = async (email: string, password: string) => {\n  try {\n  const response = await api.post('/user1', { email, password });\n  return response.data;\n  } catch (error) {\n    throw new Error('login Failed');\n  }\n};\n\n\nmock.onGet('/posts').reply(200, posts);\n\nexport const fetchPosts = async () => {\n  try {\n    const response = await api.get('/posts');\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch posts');\n  }\n};\n\n*/\n\nexport const fetchrecommend = async bmi => {\n  try {\n    const response = await api.post('/recommend', {\n      bmi\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Menu cannot find');\n  }\n};\nmock.onPost('/recommend').reply(config => {\n  try {\n    const {\n      bmi\n    } = JSON.parse(config.data);\n    let filteredMenus = [];\n    if (bmi < 18.5) {\n      filteredMenus = menus.filter(menu => menu.calorie >= 300);\n    } else if (bmi >= 18.5 && bmi < 25) {\n      filteredMenus = menus.filter(menu => menu.calorie >= 200 && menu.calorie < 300);\n    } else {\n      filteredMenus = menus.filter(menu => menu.calorie < 200 && menu.protein >= 15);\n    }\n    return [200, filteredMenus];\n  } catch (error) {\n    throw new Error('Cannot find recommend menus');\n  }\n});","map":{"version":3,"names":["axios","MockAdapter","menus","api","create","baseURL","mock","fetchrecommend","bmi","response","post","data","error","Error","onPost","reply","config","JSON","parse","filteredMenus","filter","menu","calorie","protein"],"sources":["/usr/src/app/health-app/src/API/apidata-post.ts"],"sourcesContent":["import axios from 'axios';\nimport MockAdapter from 'axios-mock-adapter';\nimport { USER_INFO ,posts, menus} from './apidata';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:3001/',\n});\n\nconst mock = new MockAdapter(api);\n\n/*\nmock.onPost('/user1').reply((config) => {\n  const { email, password } = JSON.parse(config.data);\n  if (email === USER_INFO.email && password === USER_INFO.password) {\n    return [200, { token: USER_INFO.token, message:`Login success` }];\n  }else if(email !== USER_INFO.email || password !== USER_INFO.password){\n    return [200, { messageErr: 'Invalid email or password', token: null}];\n  }else{\n    return [400, { messageErr: 'exception' }];\n  }\n  \n});\n\nexport const login = async (email: string, password: string) => {\n  try {\n  const response = await api.post('/user1', { email, password });\n  return response.data;\n  } catch (error) {\n    throw new Error('login Failed');\n  }\n};\n\n\nmock.onGet('/posts').reply(200, posts);\n\nexport const fetchPosts = async () => {\n  try {\n    const response = await api.get('/posts');\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch posts');\n  }\n};\n\n*/\n\nexport const fetchrecommend = async (bmi: number) => {\n  try {\n    const response = await api.post('/recommend', { bmi });\n    return response.data;\n    } catch (error) {\n      throw new Error('Menu cannot find');\n    }\n};\n\nmock.onPost('/recommend').reply((config) => {\n  try {\n  const { bmi } = JSON.parse(config.data);\n  let filteredMenus = [];\n  if (bmi < 18.5) {\n    filteredMenus = menus.filter(menu => menu.calorie >= 300);\n  } else if (bmi >= 18.5 && bmi < 25) {\n    filteredMenus =  menus.filter(menu => menu.calorie >= 200 && menu.calorie < 300);\n  } else {\n    filteredMenus =  menus.filter(menu => menu.calorie < 200 && menu.protein >= 15);\n  }\n  return [200, filteredMenus];\n  }catch (error) {\n    throw new Error('Cannot find recommend menus');\n  }\n});\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,oBAAoB;AAC5C,SAA2BC,KAAK,QAAO,WAAW;AAElD,MAAMC,GAAG,GAAGH,KAAK,CAACI,MAAM,CAAC;EACvBC,OAAO,EAAE;AACX,CAAC,CAAC;AAEF,MAAMC,IAAI,GAAG,IAAIL,WAAW,CAACE,GAAG,CAAC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMI,cAAc,GAAG,MAAOC,GAAW,IAAK;EACnD,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMN,GAAG,CAACO,IAAI,CAAC,YAAY,EAAE;MAAEF;IAAI,CAAC,CAAC;IACtD,OAAOC,QAAQ,CAACE,IAAI;EACpB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC;EACrC;AACJ,CAAC;AAEDP,IAAI,CAACQ,MAAM,CAAC,YAAY,CAAC,CAACC,KAAK,CAAEC,MAAM,IAAK;EAC1C,IAAI;IACJ,MAAM;MAAER;IAAI,CAAC,GAAGS,IAAI,CAACC,KAAK,CAACF,MAAM,CAACL,IAAI,CAAC;IACvC,IAAIQ,aAAa,GAAG,EAAE;IACtB,IAAIX,GAAG,GAAG,IAAI,EAAE;MACdW,aAAa,GAAGjB,KAAK,CAACkB,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,OAAO,IAAI,GAAG,CAAC;IAC3D,CAAC,MAAM,IAAId,GAAG,IAAI,IAAI,IAAIA,GAAG,GAAG,EAAE,EAAE;MAClCW,aAAa,GAAIjB,KAAK,CAACkB,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,OAAO,IAAI,GAAG,IAAID,IAAI,CAACC,OAAO,GAAG,GAAG,CAAC;IAClF,CAAC,MAAM;MACLH,aAAa,GAAIjB,KAAK,CAACkB,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,OAAO,GAAG,GAAG,IAAID,IAAI,CAACE,OAAO,IAAI,EAAE,CAAC;IACjF;IACA,OAAO,CAAC,GAAG,EAAEJ,aAAa,CAAC;EAC3B,CAAC,QAAOP,KAAK,EAAE;IACb,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;EAChD;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}