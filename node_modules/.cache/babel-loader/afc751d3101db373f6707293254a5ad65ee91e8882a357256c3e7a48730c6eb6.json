{"ast":null,"code":"import axios from 'axios';\nimport MockAdapter from 'axios-mock-adapter';\nimport { USER_INFO, posts, menus } from './apidata';\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api/login/'\n});\nconst mock = new MockAdapter(api);\nmock.onPost('/user1').reply(config => {\n  const {\n    email,\n    password\n  } = JSON.parse(config.data);\n  if (email === USER_INFO.email && password === USER_INFO.password) {\n    return [200, {\n      token: USER_INFO.token,\n      message: `Login success`\n    }];\n  } else if (email !== USER_INFO.email || password !== USER_INFO.password) {\n    return [200, {\n      messageErr: 'Invalid email or password',\n      token: null\n    }];\n  } else {\n    return [400, {\n      messageErr: 'exception'\n    }];\n  }\n});\nexport const login = async (email, password) => {\n  try {\n    const response = await api.post('/user1', {\n      email,\n      password\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('login Failed');\n  }\n};\nmock.onGet('/posts').reply(200, posts);\nexport const fetchPosts = async () => {\n  try {\n    const response = await api.get('/posts');\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch posts');\n  }\n};\nexport const fetchrecommend = async bmi => {\n  try {\n    const response = await api.post('/recommend', {\n      bmi\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Menu cannot find');\n  }\n};\nmock.onPost('/recommend').reply(config => {\n  try {\n    const {\n      bmi\n    } = JSON.parse(config.data);\n    let filteredMenus = [];\n    if (bmi < 18.5) {\n      filteredMenus = menus.filter(menu => menu.calorie >= 300);\n    } else if (bmi >= 18.5 && bmi < 25) {\n      filteredMenus = menus.filter(menu => menu.calorie >= 200 && menu.calorie < 300);\n    } else {\n      filteredMenus = menus.filter(menu => menu.calorie < 200 && menu.protein >= 15);\n    }\n    return [200, filteredMenus];\n  } catch (error) {\n    throw new Error('Cannot find recommend menus');\n  }\n});","map":{"version":3,"names":["axios","MockAdapter","USER_INFO","posts","menus","api","create","baseURL","mock","onPost","reply","config","email","password","JSON","parse","data","token","message","messageErr","login","response","post","error","Error","onGet","fetchPosts","get","fetchrecommend","bmi","filteredMenus","filter","menu","calorie","protein"],"sources":["/usr/src/app/health-app/src/API/apidata-post.ts"],"sourcesContent":["import axios from 'axios';\nimport MockAdapter from 'axios-mock-adapter';\nimport { USER_INFO ,posts, menus} from './apidata';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api/login/',\n});\n\nconst mock = new MockAdapter(api);\n\n\nmock.onPost('/user1').reply((config) => {\n  const { email, password } = JSON.parse(config.data);\n  if (email === USER_INFO.email && password === USER_INFO.password) {\n    return [200, { token: USER_INFO.token, message:`Login success` }];\n  }else if(email !== USER_INFO.email || password !== USER_INFO.password){\n    return [200, { messageErr: 'Invalid email or password', token: null}];\n  }else{\n    return [400, { messageErr: 'exception' }];\n  }\n  \n});\n\nexport const login = async (email: string, password: string) => {\n  try {\n  const response = await api.post('/user1', { email, password });\n  return response.data;\n  } catch (error) {\n    throw new Error('login Failed');\n  }\n};\n\n\nmock.onGet('/posts').reply(200, posts);\n\nexport const fetchPosts = async () => {\n  try {\n    const response = await api.get('/posts');\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch posts');\n  }\n};\n\n\n\nexport const fetchrecommend = async (bmi: number) => {\n  try {\n    const response = await api.post('/recommend', { bmi });\n    return response.data;\n    } catch (error) {\n      throw new Error('Menu cannot find');\n    }\n};\n\nmock.onPost('/recommend').reply((config) => {\n  try {\n  const { bmi } = JSON.parse(config.data);\n  let filteredMenus = [];\n  if (bmi < 18.5) {\n    filteredMenus = menus.filter(menu => menu.calorie >= 300);\n  } else if (bmi >= 18.5 && bmi < 25) {\n    filteredMenus =  menus.filter(menu => menu.calorie >= 200 && menu.calorie < 300);\n  } else {\n    filteredMenus =  menus.filter(menu => menu.calorie < 200 && menu.protein >= 15);\n  }\n  return [200, filteredMenus];\n  }catch (error) {\n    throw new Error('Cannot find recommend menus');\n  }\n});\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}